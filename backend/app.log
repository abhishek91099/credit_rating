2025-03-30 21:40:30,933 - __main__ - INFO - Database tables created
2025-03-30 21:40:30,933 - __main__ - INFO - Starting Flask application
2025-03-30 21:40:31,611 - __main__ - INFO - Database tables created
2025-03-30 21:40:31,612 - __main__ - INFO - Starting Flask application
2025-03-30 22:30:22,704 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:30:22,925 - __main__ - ERROR - Error retrieving mortgages: (pymysql.err.OperationalError) (1054, "Unknown column 'mortgages.credit_rating' in 'field list'")
[SQL: SELECT mortgages.id AS mortgages_id, mortgages.credit_score AS mortgages_credit_score, mortgages.loan_amount AS mortgages_loan_amount, mortgages.property_value AS mortgages_property_value, mortgages.annual_income AS mortgages_annual_income, mortgages.debt_amount AS mortgages_debt_amount, mortgages.loan_type AS mortgages_loan_type, mortgages.property_type AS mortgages_property_type, mortgages.credit_rating AS mortgages_credit_rating, mortgages.risk_score AS mortgages_risk_score, mortgages.created_at AS mortgages_created_at 
FROM mortgages]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-30 22:30:22,947 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:30:22,951 - __main__ - ERROR - Error retrieving mortgages: (pymysql.err.OperationalError) (1054, "Unknown column 'mortgages.credit_rating' in 'field list'")
[SQL: SELECT mortgages.id AS mortgages_id, mortgages.credit_score AS mortgages_credit_score, mortgages.loan_amount AS mortgages_loan_amount, mortgages.property_value AS mortgages_property_value, mortgages.annual_income AS mortgages_annual_income, mortgages.debt_amount AS mortgages_debt_amount, mortgages.loan_type AS mortgages_loan_type, mortgages.property_type AS mortgages_property_type, mortgages.credit_rating AS mortgages_credit_rating, mortgages.risk_score AS mortgages_risk_score, mortgages.created_at AS mortgages_created_at 
FROM mortgages]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-30 22:31:11,996 - __main__ - INFO - Database tables created
2025-03-30 22:31:11,996 - __main__ - INFO - Starting Flask application
2025-03-30 22:31:22,891 - __main__ - INFO - Database tables created
2025-03-30 22:31:22,891 - __main__ - INFO - Starting Flask application
2025-03-30 22:31:45,959 - __main__ - INFO - Database tables created
2025-03-30 22:31:45,959 - __main__ - INFO - Starting Flask application
2025-03-30 22:31:47,478 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:31:47,484 - __main__ - ERROR - Error retrieving mortgages: (pymysql.err.OperationalError) (1054, "Unknown column 'mortgages.risk_score' in 'field list'")
[SQL: SELECT mortgages.id AS mortgages_id, mortgages.credit_score AS mortgages_credit_score, mortgages.loan_amount AS mortgages_loan_amount, mortgages.property_value AS mortgages_property_value, mortgages.annual_income AS mortgages_annual_income, mortgages.debt_amount AS mortgages_debt_amount, mortgages.loan_type AS mortgages_loan_type, mortgages.property_type AS mortgages_property_type, mortgages.risk_score AS mortgages_risk_score, mortgages.created_at AS mortgages_created_at 
FROM mortgages]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-30 22:31:47,519 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:31:47,520 - __main__ - ERROR - Error retrieving mortgages: (pymysql.err.OperationalError) (1054, "Unknown column 'mortgages.risk_score' in 'field list'")
[SQL: SELECT mortgages.id AS mortgages_id, mortgages.credit_score AS mortgages_credit_score, mortgages.loan_amount AS mortgages_loan_amount, mortgages.property_value AS mortgages_property_value, mortgages.annual_income AS mortgages_annual_income, mortgages.debt_amount AS mortgages_debt_amount, mortgages.loan_type AS mortgages_loan_type, mortgages.property_type AS mortgages_property_type, mortgages.risk_score AS mortgages_risk_score, mortgages.created_at AS mortgages_created_at 
FROM mortgages]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-30 22:32:01,989 - __main__ - INFO - Database tables created
2025-03-30 22:32:01,989 - __main__ - INFO - Starting Flask application
2025-03-30 22:32:10,938 - __main__ - INFO - Database tables created
2025-03-30 22:32:10,939 - __main__ - INFO - Starting Flask application
2025-03-30 22:32:23,869 - __main__ - INFO - Database tables created
2025-03-30 22:32:23,869 - __main__ - INFO - Starting Flask application
2025-03-30 22:32:31,491 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:32:31,500 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:32:31,515 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:32:31,519 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:41:26,196 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:41:26,198 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:41:26,211 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:41:26,216 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:41:41,176 - __main__ - INFO - Received request to create mortgage: {'creditScore': 400, 'loanAmount': 7890000, 'propertyValue': 688979, 'annualIncome': 75687, 'debtAmount': 76768868, 'loanType': 'fixed', 'propertyType': 'single_family', 'creditRating': ''}
2025-03-30 22:41:41,177 - __main__ - INFO - Average credit score for calculation: 400
2025-03-30 22:41:41,178 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 22:41:41,178 - credit_ratings - INFO - Calculated LTV: 1145.17%
2025-03-30 22:41:41,178 - credit_ratings - INFO - LTV > 90%: Adding 2 points to risk score
2025-03-30 22:41:41,178 - credit_ratings - INFO - Calculated DTI: 101429.40%
2025-03-30 22:41:41,179 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 22:41:41,179 - credit_ratings - INFO - Credit score < 650: Adding 1 point to risk score
2025-03-30 22:41:41,179 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 22:41:41,180 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 22:41:41,180 - credit_ratings - INFO - Average credit score < 650: Adding 1 point to risk score
2025-03-30 22:41:41,181 - credit_ratings - INFO - Risk score components: LTV=2, DTI=2, Credit=1, Loan=-1, Property=0, AvgCredit=1
2025-03-30 22:41:41,181 - credit_ratings - INFO - Total risk score: 5
2025-03-30 22:41:41,182 - credit_ratings - INFO - Risk score 3 <= 5 <= 5: Assigning BBB rating
2025-03-30 22:41:41,182 - __main__ - ERROR - Error creating mortgage: 'credit_rating' is an invalid keyword argument for Mortgage
2025-03-30 22:45:55,332 - __main__ - INFO - Database tables created
2025-03-30 22:45:55,332 - __main__ - INFO - Starting Flask application
2025-03-30 22:46:05,252 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:46:05,263 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:46:05,286 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:46:05,289 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:46:17,396 - __main__ - INFO - Received request to create mortgage: {'creditScore': 566, 'loanAmount': 78777, 'propertyValue': 88787, 'annualIncome': 76676, 'debtAmount': 686868, 'loanType': 'fixed', 'propertyType': 'single_family', 'creditRating': ''}
2025-03-30 22:46:17,398 - __main__ - INFO - Average credit score for calculation: 566
2025-03-30 22:46:17,398 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 22:46:17,398 - credit_ratings - INFO - Calculated LTV: 88.73%
2025-03-30 22:46:17,398 - credit_ratings - INFO - LTV > 80%: Adding 1 point to risk score
2025-03-30 22:46:17,400 - credit_ratings - INFO - Calculated DTI: 895.81%
2025-03-30 22:46:17,400 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 22:46:17,401 - credit_ratings - INFO - Credit score < 650: Adding 1 point to risk score
2025-03-30 22:46:17,402 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 22:46:17,403 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 22:46:17,404 - credit_ratings - INFO - Average credit score < 650: Adding 1 point to risk score
2025-03-30 22:46:17,404 - credit_ratings - INFO - Risk score components: LTV=1, DTI=2, Credit=1, Loan=-1, Property=0, AvgCredit=1
2025-03-30 22:46:17,405 - credit_ratings - INFO - Total risk score: 4
2025-03-30 22:46:17,405 - credit_ratings - INFO - Risk score 3 <= 4 <= 5: Assigning BBB rating
2025-03-30 22:46:17,462 - __main__ - INFO - Created new mortgage with ID 1 and credit rating BBB
2025-03-30 22:46:17,467 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:46:17,469 - __main__ - INFO - Retrieved 1 mortgages
2025-03-30 22:48:03,721 - __main__ - INFO - Received request to delete mortgage with ID 1
2025-03-30 22:48:03,755 - __main__ - INFO - Deleted mortgage with ID 1
2025-03-30 22:48:03,769 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:48:03,771 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:48:12,091 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:48:12,093 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:48:12,102 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:48:12,104 - __main__ - INFO - Retrieved 0 mortgages
2025-03-30 22:48:36,669 - __main__ - INFO - Received request to create mortgage: {'creditScore': 676, 'loanAmount': 68888, 'propertyValue': 565755, 'annualIncome': 7557, 'debtAmount': 67767676, 'loanType': 'fixed', 'propertyType': 'single_family', 'creditRating': ''}
2025-03-30 22:48:36,671 - __main__ - INFO - Average credit score for calculation: 676
2025-03-30 22:48:36,671 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 22:48:36,672 - credit_ratings - INFO - Calculated LTV: 12.18%
2025-03-30 22:48:36,672 - credit_ratings - INFO - LTV <= 80%: No points added to risk score
2025-03-30 22:48:36,672 - credit_ratings - INFO - Calculated DTI: 896753.69%
2025-03-30 22:48:36,673 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 22:48:36,673 - credit_ratings - INFO - 650 <= Credit score < 700: No change to risk score
2025-03-30 22:48:36,674 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 22:48:36,674 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 22:48:36,674 - credit_ratings - INFO - 650 <= Average credit score < 700: No change to risk score
2025-03-30 22:48:36,675 - credit_ratings - INFO - Risk score components: LTV=0, DTI=2, Credit=0, Loan=-1, Property=0, AvgCredit=0
2025-03-30 22:48:36,676 - credit_ratings - INFO - Total risk score: 1
2025-03-30 22:48:36,677 - credit_ratings - INFO - Risk score 1 <= 2: Assigning AAA rating
2025-03-30 22:48:36,683 - __main__ - INFO - Created new mortgage with ID 2 and credit rating AAA
2025-03-30 22:48:36,691 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:48:36,692 - __main__ - INFO - Retrieved 1 mortgages
2025-03-30 22:48:44,878 - __main__ - INFO - Received request to update mortgage with ID 2
2025-03-30 22:48:44,880 - __main__ - INFO - Update data: {'annualIncome': 7557, 'createdAt': '2025-03-30T17:18:37', 'creditScore': 700, 'debtAmount': 67767700, 'id': 2, 'loanAmount': 68888, 'loanType': 'fixed', 'propertyType': 'single_family', 'propertyValue': 565755}
2025-03-30 22:48:44,884 - __main__ - INFO - Average credit score for calculation: 700
2025-03-30 22:48:44,884 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 22:48:44,884 - credit_ratings - INFO - Calculated LTV: 12.18%
2025-03-30 22:48:44,884 - credit_ratings - INFO - LTV <= 80%: No points added to risk score
2025-03-30 22:48:44,885 - credit_ratings - INFO - Calculated DTI: 896754.00%
2025-03-30 22:48:44,886 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 22:48:44,886 - credit_ratings - INFO - Credit score >= 700: Subtracting 1 point from risk score
2025-03-30 22:48:44,886 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 22:48:44,886 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 22:48:44,887 - credit_ratings - INFO - Average credit score >= 700: Subtracting 1 point from risk score
2025-03-30 22:48:44,887 - credit_ratings - INFO - Risk score components: LTV=0, DTI=2, Credit=-1, Loan=-1, Property=0, AvgCredit=-1
2025-03-30 22:48:44,887 - credit_ratings - INFO - Total risk score: -1
2025-03-30 22:48:44,888 - credit_ratings - INFO - Risk score -1 <= 2: Assigning AAA rating
2025-03-30 22:48:44,894 - __main__ - INFO - Updated mortgage with ID 2
2025-03-30 22:48:44,903 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:48:44,905 - __main__ - INFO - Retrieved 1 mortgages
2025-03-30 22:55:43,426 - __main__ - INFO - Database tables created
2025-03-30 22:55:43,426 - __main__ - INFO - Starting Flask application
2025-03-30 22:55:58,440 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:55:58,447 - __main__ - INFO - Retrieved 1 mortgages
2025-03-30 22:55:58,457 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:55:58,480 - __main__ - INFO - Retrieved 1 mortgages
2025-03-30 22:56:11,347 - __main__ - INFO - Received request to create mortgage: {'creditScore': 566, 'loanAmount': 7777676, 'propertyValue': 6676767, 'annualIncome': 667766, 'debtAmount': 767676, 'loanType': 'fixed', 'propertyType': 'single_family', 'creditRating': ''}
2025-03-30 22:56:11,349 - __main__ - INFO - Average credit score for calculation: 700.0
2025-03-30 22:56:11,349 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 22:56:11,349 - credit_ratings - INFO - Calculated LTV: 116.49%
2025-03-30 22:56:11,350 - credit_ratings - INFO - LTV > 90%: Adding 2 points to risk score
2025-03-30 22:56:11,350 - credit_ratings - INFO - Calculated DTI: 114.96%
2025-03-30 22:56:11,350 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 22:56:11,350 - credit_ratings - INFO - Credit score < 650: Adding 1 point to risk score
2025-03-30 22:56:11,351 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 22:56:11,351 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 22:56:11,352 - credit_ratings - INFO - Average credit score >= 700: Subtracting 1 point from risk score
2025-03-30 22:56:11,352 - credit_ratings - INFO - Risk score components: LTV=2, DTI=2, Credit=1, Loan=-1, Property=0, AvgCredit=-1
2025-03-30 22:56:11,352 - credit_ratings - INFO - Total risk score: 3
2025-03-30 22:56:11,353 - credit_ratings - INFO - Risk score 3 <= 3 <= 5: Assigning BBB rating
2025-03-30 22:56:11,371 - __main__ - INFO - Created new mortgage with ID 3 and credit rating BBB
2025-03-30 22:56:11,378 - __main__ - INFO - Received request to get all mortgages
2025-03-30 22:56:11,381 - __main__ - INFO - Retrieved 2 mortgages
2025-03-30 23:02:27,509 - __main__ - INFO - Received request to get all mortgages
2025-03-30 23:02:27,512 - __main__ - INFO - Retrieved 2 mortgages
2025-03-30 23:02:27,524 - __main__ - INFO - Received request to get all mortgages
2025-03-30 23:02:27,529 - __main__ - INFO - Retrieved 2 mortgages
2025-03-30 23:48:22,215 - __main__ - INFO - Received request to create mortgage: {'creditScore': 826, 'loanAmount': 2902390, 'propertyValue': 8723178891, 'annualIncome': 3120890, 'debtAmount': 3128931, 'loanType': 'fixed', 'propertyType': 'single_family', 'creditRating': ''}
2025-03-30 23:48:22,238 - __main__ - INFO - Average credit score for calculation: 633.0
2025-03-30 23:48:22,238 - credit_ratings - INFO - Starting risk score calculation
2025-03-30 23:48:22,239 - credit_ratings - INFO - Calculated LTV: 0.03%
2025-03-30 23:48:22,239 - credit_ratings - INFO - LTV <= 80%: No points added to risk score
2025-03-30 23:48:22,239 - credit_ratings - INFO - Calculated DTI: 100.26%
2025-03-30 23:48:22,240 - credit_ratings - INFO - DTI > 50%: Adding 2 points to risk score
2025-03-30 23:48:22,241 - credit_ratings - INFO - Credit score >= 700: Subtracting 1 point from risk score
2025-03-30 23:48:22,241 - credit_ratings - INFO - Fixed-rate loan: Subtracting 1 point from risk score
2025-03-30 23:48:22,242 - credit_ratings - INFO - Single-family home: No change to risk score
2025-03-30 23:48:22,242 - credit_ratings - INFO - Average credit score < 650: Adding 1 point to risk score
2025-03-30 23:48:22,242 - credit_ratings - INFO - Risk score components: LTV=0, DTI=2, Credit=-1, Loan=-1, Property=0, AvgCredit=1
2025-03-30 23:48:22,242 - credit_ratings - INFO - Total risk score: 1
2025-03-30 23:48:22,243 - credit_ratings - INFO - Risk score 1 <= 2: Assigning AAA rating
2025-03-30 23:48:22,298 - __main__ - INFO - Created new mortgage with ID 4 and credit rating AAA
2025-03-30 23:48:22,309 - __main__ - INFO - Received request to get all mortgages
2025-03-30 23:48:22,310 - __main__ - INFO - Retrieved 3 mortgages
2025-03-30 23:52:02,993 - __main__ - INFO - Database tables created
2025-03-30 23:52:02,994 - __main__ - INFO - Starting Flask application
2025-03-30 23:52:38,386 - __main__ - INFO - Received request to get all mortgages
2025-03-30 23:52:38,394 - __main__ - INFO - Retrieved 3 mortgages
